<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Administrar pencas</title>
	<meta http-equiv="x-ua-compatible" content="ie=edge" />
	<title></title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="manifest"
		href="http://retrieverfamily.com/penca/site/site.webmanifest" />
	<link
		href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed"
		rel="stylesheet" />
	<link
		href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
		rel="stylesheet"
		integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
		crossorigin="anonymous" />
	<link rel="apple-touch-icon"
		href="http://retrieverfamily.com/penca/site/icon.png" />
	<link href="css" rel="stylesheet" />
	<link rel="stylesheet" href="css/normalize.css" />
	<link rel="stylesheet" href="css/icons.css" />
	<link rel="stylesheet" href="css/main.css" />
	<link rel="stylesheet"
		href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.2.0/sweetalert2.min.css" />
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.2.0/sweetalert2.all.min.js"></script>
	<!-- 	<link rel="stylesheet" href="css/bootstrap.min.css" /> -->
	<!-- 	<link rel="stylesheet" href="css/bootstrap-penca-2018.css" /> -->
</h:head>
<h:body class="login clearfix">

	<h:form prependId="false">
		<f:event type="preRenderView"
			listener="#{administrarPencasBean.refresh()}" />
		<div class="header navbar"
			style="position: fixed; margin-top: -10px; height: 60px; z-index: 1000; opacity: 1;">
			<div style="float: left">
				<p style="height: 30px;" class="navbar-brand">#{administraradministrarPencasBean.sesion.usuarioLogueado.nombre}
					#{administrarPencasBean.sesion.usuarioLogueado.apellido}</p>
			</div>
			<div style="float: left; margin-left: 45px;">
				<ul class="menu">
					<li><a href="principal.jsf">Torneos</a></li>
					<li><a href="pronostico.jsf">Mis Pronosticos</a></li>
					<li><a href="puntajes.jsf">Posiciones</a></li>
					<li><a href="pencas.jsf">Pencas</a></li>
					<li><a href="administrarPencas.jsf" class="active">Administración</a></li>
				</ul>
			</div>
			<div style="float: right">
				<h:commandLink action="#{pronosticoBean.sesion.logout()}" value=""
					styleClass="my-2 my-sm-0 cerrar-cesion" title="Cerrar cesiòn">
					<i style="margin-top: 15px; margin-right: 15px;"
						class="fa fa-sign-out" aria-hidden="true"></i>
				</h:commandLink>
			</div>
		</div>
	</h:form>
	<div class="container" style="width: auto !important;">
		<div class="grid-container">
			<div class="titulo grid-item-1" style="">
				<h1>
					<b> #{administrarPencasBean.sesion.torneoSeleccionado.nombre}</b> <img
						src="img/logo.png"
						style="margin-right: 50px; width: 100%; padding: 10px;" />
				</h1>
			</div>
			<div class="titulo grid-item-2">
				<h1>
					<b style="font-size: 50px;">ADMINISTRACIóN DE PENCAS</b>
				</h1>
				<div class="login_left" style="padding-top: 2%;">
					<div class="login_left_container torneo">
						<h:form prependId="false">
							<h:panelGroup id="panelGeneral">
								<div class="">
									<div class="">
										<div class="card m-b-30">
											<div id="tablaDivs">
												<ul class="nav nav-tabs" role="tablist">
													<li class="nav-item active"
														style="width: 50%; color: white;"><a
														class="nav-link tabPencas" data-toggle="tab"
														href="#pencas" role="tab"> <span
															class="d-none d-md-block">Pencas</span><span
															class="d-block d-md-none"><i
																class="mdi mdi-account h5"></i></span>
													</a></li>
													<li class="nav-item" style="width: 50%; color: white;"><a
														class="nav-link tabSolicitudes" data-toggle="tab"
														href="#solicitudes" role="tab"> <span
															class="d-none d-md-block">Solicitudes</span><span
															class="d-block d-md-none"><i
																class="mdi mdi-account h5"></i></span>
													</a></li>
												</ul>
												<div class="tab-content">
													<div class="tab-pane p-20 active" id="pencas"
														role="tabpanel">
														<div
															style="display: flex; justify-content: space-between;">
															<div
																style="width: 40%; padding: 20px; border-right: white 2px solid; margin-top: 20px;">
																<div
																	style="display: flex; justify-content: space-between;">
																	<label for="nombrePenca"
																		style="margin-top: 5px !important;">Nombre</label>
																	<h:inputText class="activarLabel" id="nombrePenca"
																		style="margin-left: 15px;"
																		value="#{administrarPencasBean.nombrePenca}">
																	</h:inputText>

																</div>
																<br></br>
																<div>
																	<div
																		class="custom-control custom-checkbox text-left d-inline-flex"
																		style="padding: 0 0 0 40px; margin-top: 12px; margin-bottom: 10px">
																		<h:selectBooleanCheckbox id="publica"
																			class="custom-control-input"
																			value="#{administrarPencasBean.publica}"
																			data-parsley-multiple="groups"
																			data-parsley-mincheck="1" />
																		<label class="custom-control-label p-0"
																			style="font-size: 17px;" for="publica">Pública</label>
																	</div>
																	<div
																		class="custom-control custom-checkbox text-left d-inline-flex"
																		style="padding: 0 0 0 40px; margin-top: 12px; margin-bottom: 10px">
																		<h:selectBooleanCheckbox id="notifiaciones"
																			class="custom-control-input"
																			value="#{administrarPencasBean.notificaciones}"
																			data-parsley-multiple="groups"
																			data-parsley-mincheck="1" />
																		<label class="custom-control-label p-0"
																			style="font-size: 17px;" for="notifiaciones">Notificaciones</label>
																	</div>
																</div>
																<br></br>
																<p:commandLink styleClass="btn_primary btn_login"
																	style="max-width: 100%;" update="panelGeneral"
																	action="#{administrarPencasBean.crearPenca()}"
																	value="Crear penca" />

															</div>
															<div style="width: 60%; padding: 20px; margin-top: 20px;">
																<div class="tablaPuntajes">
																	<table class="table"
																		style="margin-bottom: 0px !important;">
																		<thead style="font-size: 18px;">
																			<tr style="background-color: #dbeaf8;">
																				<th scope="col" class="text-center w-30 v-align-top">Penca</th>
																				<th scope="col" class="text-center w-30 v-align-top">Torneo</th>
																				<th scope="col" class="text-center w-20 v-align-top">Participantes</th>
																				<th scope="col" class="text-center w-20 v-align-top">Tipo</th>
																			</tr>
																		</thead>

																		<tbody>
																			<ui:repeat
																				value="#{administrarPencasBean.grupoPencasUsuarioAdministrador}"
																				var="g" varStatus="i">
																				<tr style="font-size: large;"
																					class="elementos text-center fs-16 text-comun form-group">
																					<td class="l-h-normal p-y-8 col1">#{g.nombre}</td>
																					<td class="l-h-normal p-y-8 col2">#{g.torneo.nombre}</td>
																					<td class="l-h-normal p-y-8 col3">#{g.usuarios.size()}</td>
																					<h:panelGroup rendered="#{g.esAbierta}">
																						<td class="l-h-normal p-y-8 col4">Pública</td>
																					</h:panelGroup>
																					<h:panelGroup rendered="#{!g.esAbierta}">
																						<td class="l-h-normal p-y-8 col4">Privada</td>
																					</h:panelGroup>
																				</tr>
																			</ui:repeat>
																		</tbody>
																	</table>
																</div>
															</div>
														</div>
													</div>
													<div class="tab-pane p-20" id="solicitudes" role="tabpanel">
														<div class="row">
															<div class="col-md-12">
																<div class="tablaPuntajes" style="margin-top: 2%;">
																	<table class="table"
																		style="margin-bottom: 0px !important;">
																		<thead style="font-size: 18px;">
																			<tr>
																				<th scope="col" class="text-center w-30 v-align-top">Penca</th>
																				<th scope="col" class="text-center w-30 v-align-top">Torneo</th>
																				<th scope="col" class="text-center w-20 v-align-top">Usuario</th>
																				<th scope="col" class="text-center w-20 v-align-top">Solicitud</th>
																			</tr>
																		</thead>

																		<tbody>
																			<ui:repeat
																				value="#{administrarPencasBean.solicitudesPencasUsuarioAdministrador}"
																				var="s" varStatus="i">
																				<tr style="font-size: large;"
																					class="elementos text-center fs-16 text-comun form-group">
																					<td class="l-h-normal p-y-8 col1">#{s.grupoPenca.nombre}</td>
																					<td class="l-h-normal p-y-8 col2">#{s.grupoPenca.torneo.nombre}</td>
																					<td class="l-h-normal p-y-8 col3">#{s.usuario.nombre}</td>
																					<td class="l-h-normal p-y-8 col3"><h:commandLink
																							styleClass="btn_primary btn_login"
																							style="color: white; background-color: #930c0c; font-size: 15px; margin-top: 0px; margin-bottom: 0px;margin-left: 28%; max-width: 100%; width: 100px; border-radius: 10px;"
																							action="#{administrarPencasBean.aceptarSolicitud(s)}"
																							value="" title="Aceptar solicitud">Aceptar
																				</h:commandLink></td>
																				</tr>
																			</ui:repeat>
																		</tbody>
																	</table>
																</div>
															</div>
														</div>

													</div>

												</div>

											</div>
										</div>
									</div>
								</div>
							</h:panelGroup>
						</h:form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script>

    $( document ).ready(function() {
        console.log( "document loaded" );
        $('.tabPencas').click(function(){
			$('.tabPencas').addClass('active');
			$('.tabSolicitudes').removeClass('active');
		})
		$('.tabSolicitudes').click(function(){
			$('.tabSolicitudes').addClass('active');
			$('.tabPencas').removeClass('active');
		})
    });
		function guardarExito(mensaje){ 
            console.log("entra a guardar exito");
            swal(
    				'¡Excelente!',
    				mensaje,
    				'success'
    			)
        	console.log("sale de guardar exito");
        }

		function error(mensaje){ 
            console.log("entra a guardar error");
            swal(
    				'¡Oops!',
    				mensaje,
    				'error'
    			)
        	console.log("sale de guardar error");
        }
    </script>
</h:body>
</html>